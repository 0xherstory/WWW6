<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>我的关注 - 分叉叙事平台</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #0F0F23 0%, #1A1A2E 50%, #16213E 100%);
            color: #fff;
            min-height: 100vh;
            line-height: 1.6;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

        /* 顶部区域 */
        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px 0;
        }

        .page-title {
            font-size: 2.5rem;
            font-weight: 700;
            color: white;
            text-shadow: 0 2px 12px rgba(0, 0, 0, 0.3);
            margin-bottom: 10px;
        }

        .page-subtitle {
            color: rgba(255, 255, 255, 0.85);
            font-size: 1.1rem;
            opacity: 0.9;
        }

        /* 关注分类标签 - 深色玻璃态 */
        .following-categories {
            position: sticky;
            top: 0;
            z-index: 100;
            background: rgba(15, 15, 35, 0.9);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .categories-row {
            height: 64px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 16px;
            padding: 0 20px;
        }

        .category-chip {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 12px 20px;
            border-radius: 24px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            cursor: pointer;
            transition: all 0.25s ease;
            font-size: 0.95rem;
            font-weight: 500;
            color: rgba(255, 255, 255, 0.6);
            position: relative;
        }

        .category-chip:hover {
            background: rgba(255, 255, 255, 0.08);
            border-color: rgba(139, 92, 246, 0.3);
            color: white;
            transform: translateY(-1px);
        }

        .category-chip.active {
            background: rgba(139, 92, 246, 0.2);
            border-color: rgba(139, 92, 246, 0.4);
            color: white;
            font-weight: 600;
        }

        .chip-icon {
            width: 18px;
            height: 18px;
            opacity: 0.7;
        }

        /* 主体列表区域 */
        .main-content {
            padding: 24px 0;
        }

        .content-list {
            display: none;
        }

        .content-list.active {
            display: block;
        }

        /* 作者列表样式 */
        .authors-list {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .author-item {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 16px 20px;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            cursor: pointer;
            transition: all 0.25s ease;
            text-decoration: none;
            color: white;
        }

        .author-item:hover {
            background: rgba(255, 255, 255, 0.08);
            border-color: rgba(139, 92, 246, 0.3);
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(139, 92, 246, 0.2);
        }

        .author-avatar {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            background: linear-gradient(135deg, #8B5CF6, #EC4899);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
            font-weight: 600;
            color: white;
            flex-shrink: 0;
        }

        .author-info {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .author-name {
            font-size: 1rem;
            font-weight: 500;
            color: white;
        }

        .author-time {
            font-size: 0.85rem;
            color: rgba(255, 255, 255, 0.7);
        }

        /* 作品列表样式 */
        .works-list {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .work-item {
            display: flex;
            flex-direction: column;
            gap: 12px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            cursor: pointer;
            transition: all 0.25s ease;
            text-decoration: none;
            color: white;
        }

        .work-item:hover {
            background: rgba(255, 255, 255, 0.08);
            border-color: rgba(139, 92, 246, 0.3);
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(139, 92, 246, 0.2);
        }

        .work-header {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .work-cover {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            background: linear-gradient(135deg, #8B5CF6, #EC4899);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
            font-weight: 600;
            color: white;
            flex-shrink: 0;
        }

        .work-title {
            font-size: 1rem;
            font-weight: 500;
            color: white;
        }

        .work-subtitle {
            font-size: 0.85rem;
            color: rgba(255, 255, 255, 0.7);
            margin-top: 2px;
        }

        .work-status {
            font-size: 0.85rem;
            color: rgba(255, 255, 255, 0.7);
        }

        /* 空状态样式 */
        .empty-state {
            text-align: center;
            padding: 80px 20px;
            color: rgba(255, 255, 255, 0.7);
        }

        .empty-title {
            font-size: 1.1rem;
            margin-bottom: 8px;
            color: rgba(255, 255, 255, 0.9);
        }

        .empty-subtitle {
            font-size: 0.95rem;
            line-height: 1.5;
        }

        /* 动态卡片流 */
        .feed {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .activity-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 24px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .activity-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(139, 92, 246, 0.2);
            border-color: rgba(139, 92, 246, 0.3);
        }

        /* 卡片顶部 */
        .card-header {
            display: flex;
            align-items: center;
            margin-bottom: 16px;
        }

        .avatar {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            margin-right: 12px;
            background: linear-gradient(135deg, #8B5CF6, #EC4899);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
        }

        .header-info h3 {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 4px;
            color: white;
        }

        .header-info .story-title {
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.9rem;
        }

        /* 链上状态标签 */
        .chain-status {
            position: absolute;
            top: 16px;
            right: 16px;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .chain-status.minted {
            background: rgba(139, 195, 74, 0.15);
            color: #689f38;
            border: 1px solid rgba(139, 195, 74, 0.2);
        }

        .chain-status.voting {
            background: rgba(255, 183, 77, 0.15);
            color: #f57c00;
            border: 1px solid rgba(255, 183, 77, 0.2);
        }

        .chain-status.canonized {
            background: rgba(244, 114, 182, 0.2);
            color: #F472B6;
            border: 1px solid rgba(244, 114, 182, 0.3);
        }

        .status-dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: currentColor;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        /* 卡片中部 */
        .card-content {
            margin-bottom: 20px;
        }

        .activity-type {
            display: inline-block;
            padding: 6px 12px;
            border-radius: 8px;
            font-size: 0.85rem;
            font-weight: 600;
            margin-bottom: 12px;
        }

        .type-new-fork {
            background: rgba(192, 132, 252, 0.2);
            color: #C084FC;
            border: 1px solid rgba(192, 132, 252, 0.3);
        }

        .type-voting {
            background: rgba(244, 114, 182, 0.2);
            color: #F472B6;
            border: 1px solid rgba(244, 114, 182, 0.3);
        }

        .type-canon {
            background: rgba(168, 85, 247, 0.2);
            color: #A855F7;
            border: 1px solid rgba(168, 85, 247, 0.3);
        }

        .activity-description {
            font-size: 1rem;
            margin-bottom: 12px;
            line-height: 1.5;
            color: rgba(255, 255, 255, 0.9);
        }

        .branch-summary {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 16px;
            margin-top: 12px;
            border-left: 3px solid #F472B6;
            font-size: 0.95rem;
            color: rgba(255, 255, 255, 0.85);
            line-height: 1.6;
        }

        /* 卡片底部 */
        .card-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 12px;
        }

        .cta-buttons {
            display: flex;
            gap: 12px;
        }

        .cta-btn {
            padding: 10px 20px;
            border-radius: 10px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
        }

        .cta-primary {
            background: linear-gradient(135deg, #8B5CF6, #EC4899);
            color: white;
        }

        .cta-primary:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 15px rgba(139, 92, 246, 0.4);
        }

        .cta-secondary {
            background: rgba(255, 255, 255, 0.05);
            color: rgba(255, 255, 255, 0.9);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .cta-secondary:hover {
            background: rgba(255, 255, 255, 0.08);
            border-color: rgba(139, 92, 246, 0.3);
        }

        .timestamp {
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.85rem;
        }

        /* Canon 高亮样式 */
        .canon-highlight {
            border: 2px solid rgba(139, 92, 246, 0.5);
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(236, 72, 153, 0.05));
            position: relative;
        }

        .canon-highlight::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #8B5CF6, #EC4899);
        }

        /* 响应式设计 */
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .categories-row {
                height: 56px;
                gap: 12px;
                padding: 0 15px;
            }
            
            .category-chip {
                padding: 10px 16px;
                font-size: 0.9rem;
                gap: 6px;
            }
            
            .chip-icon {
                width: 16px;
                height: 16px;
            }
            
            .main-content {
                padding: 20px 0;
            }
            
            .author-item {
                padding: 14px 16px;
                gap: 12px;
            }
            
            .author-avatar {
                width: 40px;
                height: 40px;
                font-size: 0.9rem;
            }
            
            .author-name {
                font-size: 0.95rem;
            }
            
            .author-time {
                font-size: 0.8rem;
            }
            
            .work-item {
                padding: 16px;
                gap: 10px;
            }
            
            .work-cover {
                width: 36px;
                height: 36px;
                font-size: 0.8rem;
            }
            
            .work-title {
                font-size: 0.95rem;
            }
            
            .work-subtitle {
                font-size: 0.8rem;
            }
            
            .work-status {
                font-size: 0.8rem;
            }
            
            .empty-state {
                padding: 60px 20px;
            }
            
            .empty-title {
                font-size: 1rem;
            }
            
            .empty-subtitle {
                font-size: 0.9rem;
            }
        }

        /* 加载动画 */
        .loading-shimmer {
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            animation: shimmer 1.5s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        /* 返回主页按钮 */
        .back-to-home {
            position: fixed;
            top: 20px;
            left: 20px;
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 10px 16px;
            border-radius: 12px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
            z-index: 200;
            display: flex;
            align-items: center;
            gap: 6px;
            text-decoration: none;
        }

        .back-to-home:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateX(-3px);
        }
    </style>
</head>
<body>
    <!-- 返回主页按钮 -->
    <a href="../universe-hub/universe-hub.html" class="back-to-home">
        <span>←</span>
        <span>返回主页</span>
    </a>

    <div class="container">
        <!-- 顶部区域 -->
        <header class="header">
            <h1 class="page-title">正在追踪的世界</h1>
            <p class="page-subtitle">这些创作者和世界，最近又向前走了一点。</p>
        </header>

        <!-- 关注分类标签 - 两个简洁分类 -->
        <div class="following-categories">
            <div class="container">
                <div class="categories-row">
                    <button class="category-chip active" data-category="works">
                        <svg class="chip-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
                            <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>
                        </svg>
                        <span>关注的作品</span>
                    </button>

                    <button class="category-chip" data-category="authors">
                        <svg class="chip-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                            <circle cx="12" cy="7" r="4"></circle>
                        </svg>
                        <span>关注的作者</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- 主体内容区域 - 作者/作品列表 -->
        <main class="main-content">
            <div class="container">
                <!-- 作品列表 -->
                <div class="content-list active" id="worksContent">
                    <div class="works-list">
                        <a href="#" class="work-item" data-work="星际迷航：新纪元">
                            <div class="work-header">
                                <div class="work-cover">星</div>
                                <div>
                                    <div class="work-title">星际迷航：新纪元</div>
                                    <div class="work-subtitle">科幻宇宙</div>
                                </div>
                            </div>
                            <div class="work-status">几小时前有了新的进展</div>
                        </a>

                        <a href="#" class="work-item" data-work="都市修仙录">
                            <div class="work-header">
                                <div class="work-cover">修</div>
                                <div>
                                    <div class="work-title">都市修仙录</div>
                                    <div class="work-subtitle">现代修仙</div>
                                </div>
                            </div>
                            <div class="work-status">不久前有了新的进展</div>
                        </a>

                        <a href="#" class="work-item" data-work="赛博朋克 2087">
                            <div class="work-header">
                                <div class="work-cover">赛</div>
                                <div>
                                    <div class="work-title">赛博朋克 2087</div>
                                    <div class="work-subtitle">未来世界</div>
                                </div>
                            </div>
                            <div class="work-status">昨天有了新的进展</div>
                        </a>

                        <a href="#" class="work-item" data-work="武侠新世界">
                            <div class="work-header">
                                <div class="work-cover">武</div>
                                <div>
                                    <div class="work-title">武侠新世界</div>
                                    <div class="work-subtitle">江湖传说</div>
                                </div>
                            </div>
                            <div class="work-status">昨天有了新的进展</div>
                        </a>

                        <a href="#" class="work-item" data-work="魔法学院日记">
                            <div class="work-header">
                                <div class="work-cover">魔</div>
                                <div>
                                    <div class="work-title">魔法学院日记</div>
                                    <div class="work-subtitle">奇幻校园</div>
                                </div>
                            </div>
                            <div class="work-status">2天前有了新的进展</div>
                        </a>

                        <a href="#" class="work-item" data-work="时空旅行者">
                            <div class="work-header">
                                <div class="work-cover">时</div>
                                <div>
                                    <div class="work-title">时空旅行者</div>
                                    <div class="work-subtitle">穿越冒险</div>
                                </div>
                            </div>
                            <div class="work-status">3天前有了新的进展</div>
                        </a>
                    </div>
                </div>

                <!-- 作者列表 -->
                <div class="content-list" id="authorsContent">
                    <div class="authors-list">
                        <a href="author-profile.html?name=李墨白" class="author-item" data-author="李墨白">
                            <div class="author-avatar">李</div>
                            <div class="author-info">
                                <div class="author-name">李墨白</div>
                                <div class="author-time">不久前</div>
                            </div>
                        </a>

                        <a href="author-profile.html?name=王小明" class="author-item" data-author="王小明">
                            <div class="author-avatar">王</div>
                            <div class="author-info">
                                <div class="author-name">王小明</div>
                                <div class="author-time">昨天</div>
                            </div>
                        </a>

                        <a href="author-profile.html?name=张三丰" class="author-item" data-author="张三丰">
                            <div class="author-avatar">张</div>
                            <div class="author-info">
                                <div class="author-name">张三丰</div>
                                <div class="author-time">昨天</div>
                            </div>
                        </a>

                        <a href="author-profile.html?name=陈小雨" class="author-item" data-author="陈小雨">
                            <div class="author-avatar">陈</div>
                            <div class="author-info">
                                <div class="author-name">陈小雨</div>
                                <div class="author-time">2天前</div>
                            </div>
                        </a>

                        <a href="author-profile.html?name=林晓风" class="author-item" data-author="林晓风">
                            <div class="author-avatar">林</div>
                            <div class="author-info">
                                <div class="author-name">林晓风</div>
                                <div class="author-time">3天前</div>
                            </div>
                        </a>

                        <a href="author-profile.html?name=苏梦瑶" class="author-item" data-author="苏梦瑶">
                            <div class="author-avatar">苏</div>
                            <div class="author-info">
                                <div class="author-name">苏梦瑶</div>
                                <div class="author-time">4天前</div>
                            </div>
                        </a>
                    </div>
                </div>
                
                <!-- 空状态 - 作者 -->
                <div class="content-list" id="authorsEmpty" style="display: none;">
                    <div class="empty-state">
                        <div class="empty-title">这里会慢慢聚集你在意的人</div>
                        <div class="empty-subtitle">当你开始关注创作者时，他们会出现在这里</div>
                    </div>
                </div>
                
                <!-- 空状态 - 作品 -->
                <div class="content-list" id="worksEmpty" style="display: none;">
                    <div class="empty-state">
                        <div class="empty-title">你正在追的故事，会在这里继续</div>
                        <div class="empty-subtitle">关注感兴趣的作品，就能在这里看到它们的最新动态</div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        // 全局状态管理
        let currentCategory = 'works'; // 'authors' | 'works'
        
        // 分类标签交互
        document.querySelectorAll('.category-chip').forEach(chip => {
            chip.addEventListener('click', function() {
                const category = this.dataset.category;
                
                // 如果点击的是当前激活的分类，不做任何操作
                if (category === currentCategory) {
                    return;
                }
                
                // 切换分类
                switchCategory(category);
            });
        });

        // 切换分类函数
        function switchCategory(category) {
            // 更新全局状态
            currentCategory = category;
            
            // 更新分类标签状态
            document.querySelectorAll('.category-chip').forEach(chip => {
                chip.classList.remove('active');
            });
            document.querySelector(`[data-category="${category}"]`).classList.add('active');
            
            // 切换内容显示
            document.querySelectorAll('.content-list').forEach(list => {
                list.classList.remove('active');
            });
            
            if (category === 'authors') {
                document.getElementById('authorsContent').classList.add('active');
            } else if (category === 'works') {
                document.getElementById('worksContent').classList.add('active');
            }
        }

        // 作者项点击处理 - 允许默认的链接跳转行为
        document.querySelectorAll('.author-item').forEach(item => {
            item.addEventListener('click', function(e) {
                // 不再阻止默认行为，让 <a> 标签的 href 生效
                console.log('跳转到作者主页:', this.dataset.author);
            });
        });

        // 作品名称到故事ID的映射
        const workToStoryMap = {
            '星际迷航：新纪元': 3,    // 对应"星际殖民纪元"
            '都市修仙录': 5,          // 对应"都市修仙录"
            '赛博朋克 2087': 1,       // 对应"赛博朋克 2177"
            '武侠新世界': 6,          // 对应"武侠新世界"
            '魔法学院日记': 2,        // 对应"魔法学院编年史"
            '时空旅行者': 7,          // 对应"时空旅行者"
            '午后玫瑰': 4             // 对应"午后玫瑰"
        };

        // 作品项点击处理 - 在 Web3 中所有作品都是开放的
        document.querySelectorAll('.work-item').forEach(item => {
            item.addEventListener('click', function(e) {
                e.preventDefault();

                const workName = this.dataset.work;
                const storyId = workToStoryMap[workName];

                // 跳转到对应的故事树页面
                if (storyId) {
                    window.location.href = `../story-tree.html?id=${storyId}`;
                } else {
                    console.warn('未找到作品ID:', workName);
                }
            });
        });

        // 列表项悬停效果增强
        document.querySelectorAll('.author-item, .work-item').forEach(item => {
            item.addEventListener('mouseenter', function() {
                this.style.transform = 'translateY(-2px)';
            });
            
            item.addEventListener('mouseleave', function() {
                this.style.transform = 'translateY(0)';
            });
        });

        // 页面加载时的初始状态
        document.addEventListener('DOMContentLoaded', function() {
            // 默认显示作品列表
            switchCategory('works');
        });

        // 模拟从其他页面返回时的状态恢复
        function restoreStateFromNavigation(type) {
            // 这个函数可以在用户从作者主页或作品主页返回时调用
            if (type === 'author') {
                switchCategory('authors');
            } else if (type === 'work') {
                switchCategory('works');
            }
        }

        // 模拟空状态切换（用于演示）
        function toggleEmptyState(category, isEmpty) {
            const contentId = category === 'authors' ? 'authorsContent' : 'worksContent';
            const emptyId = category === 'authors' ? 'authorsEmpty' : 'worksEmpty';
            
            if (isEmpty) {
                document.getElementById(contentId).style.display = 'none';
                document.getElementById(emptyId).style.display = 'block';
                document.getElementById(emptyId).classList.add('active');
            } else {
                document.getElementById(contentId).style.display = 'block';
                document.getElementById(contentId).classList.add('active');
                document.getElementById(emptyId).style.display = 'none';
                document.getElementById(emptyId).classList.remove('active');
            }
        }

        // 添加一些演示用的交互效果
        document.querySelectorAll('.author-item, .work-item').forEach(item => {
            // 为所有列表项添加过渡动画
            item.style.transition = 'all 0.25s ease';
        });
    </script>
</body>
</html>